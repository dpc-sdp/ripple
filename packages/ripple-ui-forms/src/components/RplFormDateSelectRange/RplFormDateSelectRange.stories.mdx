import {
  Canvas,
  Meta,
  Story,
  ArgsTable
} from '@storybook/addon-docs'
import { ref } from 'vue'
import RplForm from '../RplForm/RplForm.vue'
import RplFormDateSelectRange from './RplFormDateSelectRange.vue'
import '@dpc-sdp/ripple-ui-core/style/components'

export const FormElementTemplate = (args) => ({
  components: { RplForm },
  setup() {
    return { args }
  },
  template: `
    <RplForm
      id="storybook-form-${args.id}"
      :data-invalid="args.invalid"
      :style="{
        '--local-max-width': '595px'
      }"
    >
      <FormKit v-bind="args" form-class="rpl-form" type="RplFormDateSelectRange" />
      <template #belowForm="{ value }">
        <div class="rpl-storybook-form-values">
          <h2 class="rpl-type-h4">Internal form values</h2>
          <pre wrap>{{ value }}</pre>
        </div>
      </template>
    </RplForm>
`
})

<Meta title='Forms/Date select range' component={RplFormDateSelectRange} />

# Forms

<ArgsTable of={RplFormDateSelectRange} />

<Canvas>
  <Story
    name='Default'
    args={{
      id: 'date-select-range-default',
      name: 'date-select-range-default',
      label: 'Date select range'
    }}
  >
    {FormElementTemplate.bind()}
  </Story>
</Canvas>

<Canvas>
  <Story
    name='Prefilled'
    args={{
      id: 'date-select-range-prefilled',
      name: 'date-select-range-prefilled',
      value: {
        from: new Date().toLocaleDateString(),
        to: new Date(Date.now() + (4*86400000)).toLocaleDateString()
      },
      dateFormat: 'dd/MM/yyyy',
      label: 'Prefilled',
      help: 'Date select control with prefilled value.'
    }}
  >
    {FormElementTemplate.bind()}
  </Story>
</Canvas>

<Canvas>
  <Story
    name='Inactive'
    args={{
      id: 'date-select-range-inactive',
      name: 'date-select-range-inactive',
      disabled: true,
      label: 'Inactive',
      help: 'Date select control is disabled.'
    }}
  >
    {FormElementTemplate.bind()}
  </Story>
</Canvas>

<Canvas>
  <Story
    name='Invalid'
    args={{
      id: 'date-select-range-invalid',
      name: 'date-select-range-invalid',
      invalid: true,
      label: 'Invalid'
    }}
  >
    {FormElementTemplate.bind()}
  </Story>
</Canvas>
